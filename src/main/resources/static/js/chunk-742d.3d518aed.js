(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-742d"],{"1d21":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-list-box-outline"}}),t._v("\n        任务列表\n    ")],1),s("div",[s("div",[s("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.operate}},[s("Button",{attrs:{type:"default",size:"large"}},[t._v("\n                    批量操作\n                    "),s("Icon",{attrs:{type:"ios-arrow-down"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{attrs:{name:"activate"}},[s("Icon",{attrs:{type:"md-play"}}),t._v("\n                        激活\n                    ")],1),s("DropdownItem",{attrs:{name:"pause"}},[s("Icon",{attrs:{type:"md-pause"}}),t._v("\n                        暂停\n                    ")],1),s("div",{staticClass:"line"}),s("DropdownItem",{attrs:{name:"delete"}},[s("Icon",{attrs:{type:"md-trash"}}),t._v("\n                        删除\n                    ")],1)],1)],1),s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"large"},on:{click:t.add}},[t._v("\n                新建任务\n                "),s("Icon",{attrs:{type:"md-add"}})],1),s("Select",{staticStyle:{width:"120px",float:"right"},attrs:{placeholder:"请选择分组"},on:{"on-change":t.changeGroup},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[s("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.groups,function(e){return s("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})],2)],1),s("div",{staticStyle:{"margin-top":"20px"}},[s("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.data}})],1)])])},r=[],a={name:"Task",data(){return{columns:[{type:"selection",width:60,align:"center"},{title:"组名称",key:"group"},{title:"任务名称",key:"jobName"},{title:"任务类型",width:100,key:"jobType",render:(t,e)=>{return t("div",[t("strong",0===e.row.jobType?"脚本调用":"远程请求")])}},{title:"触发类型",width:100,key:"triggerType",render:(t,e)=>{return t("div",[t("strong",0===e.row.triggerType?"简单触发":"cron触发")])}},{title:"执行规则",key:"cron",render:(t,e)=>{return t("div",[t("strong",0===e.row.triggerType?"执行周期:"+e.row.period+",执行次数:"+e.row.count:e.row.cron)])}},{title:"执行状态",key:"triggerState",render:(t,e)=>{return t("div",[t("strong",this.getState(e.row.triggerState))])}},{title:"操作",key:"action",width:120,align:"center",render:(t,e)=>{return t("div",[t("Button",{props:{type:"info"},style:{marginRight:"5px"},on:{click:()=>{this.show(e.row.group+"_"+e.row.jobName)}}},["查看",t("Icon",{props:{type:"ios-paper-plane",size:18},style:{verticalAlign:"-3px"}})])])}}],data:[],groups:[],group:""}},methods:{add(){this.$router.push("/taskAdd")},getState(t){return 0===t?"正常":1===t?"暂停":2===t?"完成":3===t?"错误":4===t?"阻塞":"已终结"},operate(t){switch(t){case"pause":this.$Modal.confirm({title:"确认框",content:"<p>是否暂停任务</p>",onOk:()=>{this.$axios.post("/pause",{jobList:this.$refs.selection.getSelection()}).then(()=>{this.refresh(),this.$Message.info("暂停任务成功")})}});break;case"activate":this.$Modal.confirm({title:"确认框",content:"<p>是否激活任务</p>",onOk:()=>{this.$axios.post("/activate",{jobList:this.$refs.selection.getSelection()}).then(()=>{this.refresh(),this.$Message.info("激活任务成功")})}});break;case"delete":this.$Modal.confirm({title:"确认框",content:"<p>是否删除任务</p>",onOk:()=>{this.$axios.post("/delete",{jobList:this.$refs.selection.getSelection()}).then(()=>{this.refresh(),this.$Message.info("删除任务成功")})}});break}},refresh(){this.$axios.get("/jobs?group="+this.group).then(t=>{this.data=t.data.data})},loadGroups(){this.$axios.get("/group").then(t=>{t.data.success?this.groups=t.data.data:this.$Message.warn("查询组失败")})},changeGroup(){this.$axios.get("/jobs?group="+this.group).then(t=>{this.data=t.data.data})},show(t){this.$router.push("/taskView?job="+t)}},created(){this.$axios.get("/jobs").then(t=>{this.data=t.data.data}),this.loadGroups()}},i=a,n=(s("a2f2"),s("2877")),p=Object(n["a"])(i,o,r,!1,null,"297bb912",null);p.options.__file="Task.vue";e["default"]=p.exports},a2f2:function(t,e,s){"use strict";var o=s("a38a"),r=s.n(o);r.a},a38a:function(t,e,s){}}]);
//# sourceMappingURL=chunk-742d.3d518aed.js.map