(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2370"],{"1d21":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"ios-list-box-outline"}}),t._v("\n        任务列表\n    ")],1),n("div",[n("div",[n("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.operate}},[n("Button",{attrs:{type:"default",size:"large"}},[t._v("\n                    批量操作\n                    "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"activate"}},[n("Icon",{attrs:{type:"md-play"}}),t._v("\n                        激活\n                    ")],1),n("DropdownItem",{attrs:{name:"pause"}},[n("Icon",{attrs:{type:"md-pause"}}),t._v("\n                        暂停\n                    ")],1),n("div",{staticClass:"line"}),n("DropdownItem",{attrs:{name:"delete"}},[n("Icon",{attrs:{type:"md-trash"}}),t._v("\n                        删除\n                    ")],1)],1)],1),n("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"large"},on:{click:t.add}},[t._v("\n                新建任务\n                "),n("Icon",{attrs:{type:"md-add"}})],1),n("Select",{staticStyle:{width:"120px",float:"right"},attrs:{placeholder:"请选择分组"},on:{"on-change":t.changeGroup},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[n("Option",{attrs:{value:""}},[t._v("全部")]),t._l(t.groups,function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})],2)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.data}})],1)])])},r=[],a={name:"Task",data:function(){var t=this;return{columns:[{type:"selection",width:60,align:"center"},{title:"组名称",key:"group"},{title:"任务名称",key:"jobName"},{title:"任务类型",width:100,key:"jobType",render:function(t,e){return t("div",[t("strong",0===e.row.jobType?"脚本调用":"远程请求")])}},{title:"触发类型",width:100,key:"triggerType",render:function(t,e){return t("div",[t("strong",0===e.row.triggerType?"简单触发":"cron触发")])}},{title:"执行规则",key:"cron",render:function(t,e){return t("div",[t("strong",0===e.row.triggerType?"执行周期:"+e.row.period+",执行次数:"+e.row.count:e.row.cron)])}},{title:"执行状态",key:"triggerState",render:function(e,n){return e("div",[e("strong",t.getState(n.row.triggerState))])}},{title:"操作",key:"action",width:120,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"info"},style:{marginRight:"5px"},on:{click:function(){t.show(n.row.group+"_"+n.row.jobName)}}},["查看",e("Icon",{props:{type:"ios-paper-plane",size:18},style:{verticalAlign:"-3px"}})])])}}],data:[],groups:[],group:""}},methods:{add:function(){this.$router.push("/taskAdd")},getState:function(t){return 0===t?"正常":1===t?"暂停":2===t?"完成":3===t?"错误":4===t?"阻塞":"已终结"},operate:function(t){var e=this;switch(t){case"pause":this.$Modal.confirm({title:"确认框",content:"<p>是否暂停任务</p>",onOk:function(){e.$axios.post("/pause",{jobList:e.$refs.selection.getSelection()}).then(function(){e.refresh(),e.$Message.info("暂停任务成功")})}});break;case"activate":this.$Modal.confirm({title:"确认框",content:"<p>是否激活任务</p>",onOk:function(){e.$axios.post("/activate",{jobList:e.$refs.selection.getSelection()}).then(function(){e.refresh(),e.$Message.info("激活任务成功")})}});break;case"delete":this.$Modal.confirm({title:"确认框",content:"<p>是否删除任务</p>",onOk:function(){e.$axios.post("/delete",{jobList:e.$refs.selection.getSelection()}).then(function(){e.refresh(),e.$Message.info("删除任务成功")})}});break}},refresh:function(){var t=this;this.$axios.get("/jobs?group="+this.group).then(function(e){t.data=e.data.data})},loadGroups:function(){var t=this;this.$axios.get("/group").then(function(e){e.data.success?t.groups=e.data.data:t.$Message.warn("查询组失败")})},changeGroup:function(){var t=this;this.$axios.get("/jobs?group="+this.group).then(function(e){t.data=e.data.data})},show:function(t){this.$router.push("/taskView?job="+t)}},created:function(){var t=this;this.$axios.get("/jobs").then(function(e){t.data=e.data.data}),this.loadGroups()}},i=a,s=(n("b3f3"),n("2877")),c=Object(s["a"])(i,o,r,!1,null,"53e8bca7",null);c.options.__file="Task.vue";e["default"]=c.exports},"51fb":function(t,e,n){},b3f3:function(t,e,n){"use strict";var o=n("51fb"),r=n.n(o);r.a}}]);
//# sourceMappingURL=chunk-2370.53d8356d.js.map